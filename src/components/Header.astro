---
const currentPath = Astro.url.pathname;
---

<header class="mx-auto max-w-[1200px] px-4 py-4">
  <div class="flex justify-between gap-2">
    <a href="/" class="flex items-center gap-2 sm:gap-[10px]">
      <svg
        preserveAspectRatio="none"
        width="42"
        height="32"
        overflow="visible"
        style="display: block;"
        viewBox="0 0 38 29"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g id="Logo">
          <rect
            id="Rectangle 1"
            x="23.7094"
            y="13.9658"
            width="14.2906"
            height="14.2906"
            fill="var(--fill-0, #949599)"></rect>
          <path
            id="Vector 1"
            d="M22.0855 22.735H14.2906L22.0855 12.3419V0L0 27.9316H22.0855V22.735Z"
            fill="var(--fill-0, #ED1B24)"></path>
        </g>
      </svg>

      <p class="font-arial text-[20px] leading-normal font-bold">IMCOP</p>
    </a>
    <nav class="hidden items-center gap-4 text-lg font-medium md:flex lg:gap-7">
      <a
        href="/"
        class={`block transition-opacity ${
          currentPath === "/" ? "border-b-2 border-primary" : "hover:opacity-60"
        }`}
      >
        Companie
      </a>
      <a
        href="/produse/clasic"
        class={`block transition-opacity ${
          currentPath === "/produse/clasic/"
            ? "border-b-2 border-primary"
            : "hover:opacity-60"
        }`}
      >
        Produse
      </a>
      <a
        href="/informatii-tehnice"
        class={`block transition-opacity ${
          currentPath === "/informatii-tehnice/"
            ? "border-b-2 border-primary"
            : "hover:opacity-60"
        }`}
      >
        Informatii tehnice
      </a>
      <a
        href="/contact"
        class={`block transition-opacity ${
          currentPath === "/contact/"
            ? "border-b-2 border-primary"
            : "hover:opacity-60"
        }`}
      >
        Contact
      </a>
    </nav>
    <button
      id="mobile-menu-button"
      class="md:hidden"
      aria-label="Menu"
      aria-expanded="false"
    >
      <svg
        id="menu-icon"
        class="h-6 w-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
      <svg
        id="close-icon"
        class="hidden h-6 w-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>
  <nav
    id="mobile-menu"
    class="mt-6 hidden flex-col border-y border-neutral-200 pt-2 text-center text-lg font-medium md:hidden"
  >
    <a
      href="/"
      class={`block py-4  ${currentPath === "/" ? "text-primary" : ""}`}
    >
      Companie
    </a>
    <a
      href="/produse/clasic"
      class={`block py-4  ${
        currentPath === "/produse/clasic" ? "text-primary" : ""
      }`}
    >
      Produse
    </a>
    <a
      href="/informatii-tehnice"
      class={`block py-4  ${
        currentPath === "/informatii-tehnice" ? "text-primary" : ""
      }`}
    >
      Informatii tehnice
    </a>
    <a
      href="/contact"
      class={`block py-4  ${currentPath === "/contact" ? "text-primary" : ""}`}
    >
      Contact
    </a>
  </nav>
</header>

<script>
  const menuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuIcon = document.getElementById("menu-icon");
  const closeIcon = document.getElementById("close-icon");

  if (menuButton && mobileMenu && menuIcon && closeIcon) {
    menuButton.addEventListener("click", () => {
      const isOpen = !mobileMenu.classList.contains("hidden");

      if (isOpen) {
        mobileMenu.classList.add("hidden");
        menuIcon.classList.remove("hidden");
        closeIcon.classList.add("hidden");
        menuButton.setAttribute("aria-expanded", "false");
      } else {
        mobileMenu.classList.remove("hidden");
        menuIcon.classList.add("hidden");
        closeIcon.classList.remove("hidden");
        menuButton.setAttribute("aria-expanded", "true");
      }
    });

    // Close menu when clicking on a link
    const mobileLinks = mobileMenu.querySelectorAll("a");
    mobileLinks.forEach((link) => {
      link.addEventListener("click", () => {
        mobileMenu.classList.add("hidden");
        menuIcon.classList.remove("hidden");
        closeIcon.classList.add("hidden");
        menuButton.setAttribute("aria-expanded", "false");
      });
    });
  }
</script>
